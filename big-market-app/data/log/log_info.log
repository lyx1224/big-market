24-11-27.21:28:03.059 [main            ] INFO  RaffleOrderTest        - Starting RaffleOrderTest using Java 1.8.0_392 on LYx14 with PID 27176 (started by 18396 in C:\D\IdeaProjects\big-market\big-market-app)
24-11-27.21:28:03.061 [main            ] INFO  RaffleOrderTest        - The following 1 profile is active: "dev"
24-11-27.21:28:04.753 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-27.21:28:04.760 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-27.21:28:04.842 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 47 ms. Found 0 Redis repository interfaces.
24-11-27.21:28:08.243 [main            ] INFO  Version                - Redisson 3.23.4
24-11-27.21:28:09.197 [redisson-netty-2-5] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-27.21:28:09.231 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-27.21:28:13.372 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-27.21:28:13.481 [main            ] INFO  RaffleOrderTest        - Started RaffleOrderTest in 11.033 seconds (JVM running for 12.517)
24-11-27.21:28:13.970 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-27.21:28:14.462 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-27.21:28:14.754 [main            ] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期、状态】校验开始。
24-11-27.21:28:14.755 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【校验&扣减】开始。
24-11-27.21:28:14.764 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-27.21:28:14.813 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-27.21:28:14.986 [main            ] INFO  RaffleOrderTest        - 测试结果：017703300848
24-11-27.21:28:15.007 [scheduling-1    ] INFO  UpdateAwardStockJob    - 定时任务，更新奖品消耗库存【延迟队列获取，降低对数据库的更新频次，不要产生竞争】
24-11-27.21:28:15.041 [scheduling-1    ] ERROR UpdateAwardStockJob    - 定时任务，更新奖品消耗库存失败
org.springframework.beans.factory.BeanCreationNotAllowedException: Error creating bean with name 'redissonConnectionFactory': Singleton bean creation not allowed while singletons of this factory are in destruction (Do not request a bean from a BeanFactory in a destroy method implementation!)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:220)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory$1.orderedStream(DefaultListableBeanFactory.java:481)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.detectPersistenceExceptionTranslators(PersistenceExceptionTranslationInterceptor.java:167)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:149)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.lyx.infrastructure.persistent.repository.StrategyRepository$$EnhancerBySpringCGLIB$$8db82710.takeQueueValue(<generated>)
	at cn.lyx.domain.strategy.service.raffle.DefaultRaffleStrategy.takeQueueValue(DefaultRaffleStrategy.java:55)
	at cn.lyx.trigger.job.UpdateAwardStockJob.exec(UpdateAwardStockJob.java:26)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:84)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:95)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$201(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:293)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
24-11-27.21:29:27.902 [main            ] INFO  RaffleOrderTest        - Starting RaffleOrderTest using Java 1.8.0_392 on LYx14 with PID 2452 (started by 18396 in C:\D\IdeaProjects\big-market\big-market-app)
24-11-27.21:29:27.903 [main            ] INFO  RaffleOrderTest        - The following 1 profile is active: "dev"
24-11-27.21:29:28.922 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-27.21:29:28.926 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-27.21:29:28.983 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 35 ms. Found 0 Redis repository interfaces.
24-11-27.21:29:31.337 [main            ] INFO  Version                - Redisson 3.23.4
24-11-27.21:29:32.102 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-27.21:29:32.130 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-27.21:29:35.680 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-27.21:29:35.811 [main            ] INFO  RaffleOrderTest        - Started RaffleOrderTest in 8.349 seconds (JVM running for 9.212)
24-11-27.21:29:36.260 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-27.21:29:36.696 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-27.21:29:36.820 [main            ] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期、状态】校验开始。
24-11-27.21:29:36.821 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【校验&扣减】开始。
24-11-27.21:29:36.827 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-27.21:29:36.870 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-27.21:30:04.594 [main            ] INFO  RaffleOrderTest        - Starting RaffleOrderTest using Java 1.8.0_392 on LYx14 with PID 35732 (started by 18396 in C:\D\IdeaProjects\big-market\big-market-app)
24-11-27.21:30:04.596 [main            ] INFO  RaffleOrderTest        - The following 1 profile is active: "dev"
24-11-27.21:30:05.714 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
24-11-27.21:30:05.720 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
24-11-27.21:30:05.780 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 38 ms. Found 0 Redis repository interfaces.
24-11-27.21:30:08.575 [main            ] INFO  Version                - Redisson 3.23.4
24-11-27.21:30:09.340 [redisson-netty-2-4] INFO  MasterPubSubConnectionPool - 1 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-27.21:30:09.373 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 127.0.0.1/127.0.0.1:16379
24-11-27.21:30:13.357 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
24-11-27.21:30:13.485 [main            ] INFO  RaffleOrderTest        - Started RaffleOrderTest in 9.328 seconds (JVM running for 10.223)
24-11-27.21:30:13.981 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-27.21:30:14.431 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-27.21:30:14.570 [main            ] INFO  ActivityBaseActionChain - 活动责任链-基础信息【有效期、状态】校验开始。
24-11-27.21:30:14.571 [main            ] INFO  ActivitySkuStockActionChain - 活动责任链-商品库存处理【校验&扣减】开始。
24-11-27.21:30:14.579 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Starting...
24-11-27.21:30:14.614 [main            ] INFO  HikariDataSource       - Retail_HikariCP - Start completed.
24-11-27.21:30:14.651 [main            ] INFO  RaffleOrderTest        - 测试结果：265290821014
